<div class="page-wrapper">
  <div class="page-header">
    <div class="page-title-row">
      <mat-icon>article</mat-icon>
      <div>
        <h2 class="page-title">Solicitud de Servicios de Nacimientos</h2>
        <span class="page-subtitle">Captura la informaci√≥n del acta y del solicitante</span>
      </div>
    </div>
    <button class="btn-volver" (click)="goHome()">
      <mat-icon>arrow_back</mat-icon>
      Volver
    </button>
  </div>

  <form>
    <div class="seccion-card">
      <div class="seccion-titulo"><mat-icon>description</mat-icon> Datos del Acta</div>

      <div class="form-row-multi">
        <div class="field-group">
          <span class="label-inline">Entidad</span>
          <input type="text" class="field-tiny" [(ngModel)]="entidadCodigo" name="entidadCodigo" />
          <input type="text" class="field-auto" [(ngModel)]="entidadNombre" name="entidadNombre" />
        </div>
        <div class="field-group">
          <span class="label-inline">Distrito</span>
          <input type="text" class="field-tiny" [(ngModel)]="distritoCodigo" name="distritoCodigo" />
          <input type="text" class="field-auto" [(ngModel)]="distritoNombre" name="distritoNombre" />
        </div>
      </div>

      <div class="form-row-multi">
        <div class="field-group">
          <span class="label-inline">Municipio</span>
          <input type="text" class="field-tiny" [(ngModel)]="municipioCodigo" name="municipioCodigo" />
          <input type="text" class="field-auto" [(ngModel)]="municipioNombre" name="municipioNombre" />
        </div>
        <div class="field-group">
          <span class="label-inline">Localidad</span>
          <input type="text" class="field-tiny" [(ngModel)]="localidadCodigo" name="localidadCodigo" />
          <input type="text" class="field-auto" [(ngModel)]="localidadNombre" name="localidadNombre" />
        </div>
      </div>

      <div class="row-acta">
        <div class="campo"><label>Foja</label><input type="text" [(ngModel)]="foja" name="foja" /></div>
        <div class="campo"><label>Oficial√≠a</label><input type="text" [(ngModel)]="oficialia" name="oficialia" /></div>
        <div class="campo"><label>Acta</label><input type="text" [(ngModel)]="acta" name="acta" /></div>
        <div class="campo"><label>EnDoc</label><input type="text" [(ngModel)]="enDoc" name="enDoc" /></div>
        <div class="campo"><label>Fecha</label><input type="date" [(ngModel)]="fechaActa" name="fechaActa" /></div>
        <div class="campo"><label>A√±o</label><input type="text" [(ngModel)]="anioActa" name="anioActa" /></div>
      </div>
    </div>

    <div class="seccion-card">
      <div class="seccion-titulo"><mat-icon>person</mat-icon> Datos del Registrado</div>

      <div class="form-row-multi">
        <div class="campo field-auto">
          <label>Nombre(s)</label>
          <input type="text" [(ngModel)]="nombreRegistrado" name="nombreRegistrado" />
        </div>
        <div class="campo field-medium">
          <label>CRIP</label>
          <input type="text" [(ngModel)]="crip" name="crip" />
        </div>
      </div>

      <div class="form-row-multi">
        <div class="field-group">
          <span class="label-inline">Entidad nac.</span>
          <input type="text" class="field-tiny" [(ngModel)]="entidadNacCodigo" name="entidadNacCodigo" />
          <input type="text" class="field-auto" [(ngModel)]="entidadNacNombre" name="entidadNacNombre" />
        </div>
        <div class="field-group">
          <span class="label-inline">Municipio nac.</span>
          <input type="text" class="field-tiny" [(ngModel)]="municipioNacCodigo" name="municipioNacCodigo" />
          <input type="text" class="field-auto" [(ngModel)]="municipioNacNombre" name="municipioNacNombre" />
        </div>
      </div>

      <div class="form-row-multi">
        <div class="field-group">
          <span class="label-inline">Distrito nac.</span>
          <input type="text" class="field-tiny" [(ngModel)]="distritoNacCodigo" name="distritoNacCodigo" />
          <input type="text" class="field-auto" [(ngModel)]="distritoNacNombre" name="distritoNacNombre" />
        </div>
        <div class="field-group">
          <span class="label-inline">Localidad nac.</span>
          <input type="text" class="field-tiny" [(ngModel)]="localidadNacCodigo" name="localidadNacCodigo" />
          <input type="text" class="field-auto" [(ngModel)]="localidadNacNombre" name="localidadNacNombre" />
        </div>
      </div>

      <div class="form-row-multi">
        <div class="campo field-auto">
          <label>Padre</label>
          <input type="text" [(ngModel)]="padre" name="padre" />
        </div>
        <div class="campo field-auto">
          <label>Madre</label>
          <input type="text" [(ngModel)]="madre" name="madre" />
        </div>
      </div>
    </div>

    <div class="seccion-card">
      <div class="seccion-titulo"><mat-icon>settings</mat-icon> Servicio</div>

      <div class="form-row-multi">
        <div class="campo field-auto">
          <label>Servicio</label>
          <select [(ngModel)]="tipoServicioId" name="tipoServicioId">
            <option [value]="0">Seleccione un tipo de Servicio</option>
            <option *ngFor="let ts of tiposServicio" [value]="ts.id">{{ ts.nombre }}</option>
            <ng-container *ngIf="tiposServicio.length === 0">
              <option value="1">C: Certificacion de acta</option>
              <option value="2">E: Const. Reg. Extem.</option>
              <option value="3">F: Fotocopia certificada</option>
              <option value="4">G: Anotacion y Fotocopia</option>
              <option value="5">H: Anotacion marginal</option>
              <option value="6">I: Fotocopia indice</option>
              <option value="7">J: Fotocopia C./Anot. ya pagada</option>
              <option value="8">M: Anotacion marginal</option>
              <option value="9">O: Anotacion marginal con certificacion</option>
              <option value="10">P: Fot. Ant y Post</option>
              <option value="11">R: Fot. Ant, Int, Post</option>
              <option value="12">V: Fotocopia C/Indice alfabetico</option>
              <option value="13">W: Fotocopia indice e inter.</option>
              <option value="14">X: Validacion</option>
              <option value="15">Z: Fotocopia con anotacion pagada</option>
              <option value="16">L: Certificacion con anotacion pagada</option>
            </ng-container>
          </select>
        </div>
        <div class="campo field-auto">
          <label>Documento Presentado</label>
          <select [(ngModel)]="documentoPresentado" name="documentoPresentado">
            <option value="">Seleccione uno por favor</option>
            <option value="fotocopia">Presento fotocopia</option>
            <option value="verbal">Datos verbales</option>
            <option value="boleta">Boleta de registro</option>
            <option value="negativo">Certificado negativo</option>
            <option value="resolucion">Resolucion</option>
          </select>
        </div>
      </div>

      <div class="row-acta">
        <div class="campo">
          <label>Tipo Acta</label>
          <input type="text" value="NACIMIENTO" readonly class="campo-input readonly" />
        </div>
        <div class="campo">
          <label>Copias Solicitadas</label>
          <input type="number" min="1" [(ngModel)]="copiasSOlicitadas" name="copiasSOlicitadas" />
        </div>
        <div class="campo">
          <label>A√±os de B√∫squeda</label>
          <input type="text" [(ngModel)]="aniosBusqueda" name="aniosBusqueda" />
        </div>
        <div class="campo">
          <label>Rango B√∫squeda</label>
          <input type="text" [(ngModel)]="rangoBusqueda" name="rangoBusqueda" />
        </div>
        <div class="campo">
          <label>Fecha Entrega</label>
          <input type="date" [(ngModel)]="fechaEntrega" name="fechaEntrega" (blur)="autoFechaEntrega()" />
        </div>
        <div class="campo">
          <label>Hora Entrega</label>
          <input type="time" [(ngModel)]="horaEntrega" name="horaEntrega" (change)="autoHoraEntrega()" />
        </div>
      </div>
    </div>

    <div class="seccion-card">
      <div class="seccion-titulo"><mat-icon>receipt</mat-icon> Facturaci√≥n</div>

      <div class="form-row-multi">
        <div class="campo field-auto">
          <label>Nombre</label>
          <input type="text" [(ngModel)]="nombreContribuyente" name="nombreContribuyente" />
        </div>
      </div>

      <div class="form-row-multi">
        <div class="campo field-auto">
          <label>CFDI</label>
          <select [(ngModel)]="usoCfdi" name="usoCfdi">
            <option value="S01">S01 : Sin efectos fiscales</option>
            <option value="G01">G01 : Adquisici√≥n de mercanc√≠as</option>
            <option value="G03">G03 : Gastos en general</option>
            <option value="D03">D03 : Gastos funerales</option>
            <option value="D04">D04 : Donativos</option>
          </select>
        </div>
        <div class="campo field-medium">
          <label>RFC</label>
          <input type="text" [(ngModel)]="rfc" name="rfc" />
        </div>
      </div>

      <div class="form-row-multi">
        <div class="campo field-auto">
          <label>R√©gimen</label>
          <select [(ngModel)]="regimenFiscal" name="regimenFiscal">
            <option value="616">616 Sin obligaciones fiscales</option>
            <option value="601">601 General ley de personas morales</option>
            <option value="603">603 Personas morales con fines no lucrativos</option>
            <option value="605">605 Sueldos y salarios</option>
            <option value="606">606 Arrendamiento</option>
            <option value="607">607 Regimen de enagenacion o Adquisici√≥n de bienes</option>
            <option value="608">608 Demas ingresos</option>
            <option value="609">609 Consolidacion</option>
            <option value="610">610 Residentes en el extranjero sin permanencia en M√©xico</option>
            <option value="611">611 Ingresos por dividendos socios y accionistas</option>
            <option value="612">612 Personas fisicas con actividades empresariales</option>
            <option value="614">614 Ingresos por intereses</option>
            <option value="615">615 Regimen de los ingresos por obtencion de premios</option>
            <option value="620">620 Sociedades cooperativas de produccion</option>
            <option value="621">621 Incorporacion fiscal</option>
            <option value="622">622 Actividades agricolas, ganaderas, silvicolas</option>
            <option value="623">623 Opcional para grupos de sociedades</option>
            <option value="626">626 Regimen simplificado de confianza</option>
          </select>
        </div>
      </div>

      <div class="row-acta">
        <div class="campo">
          <label>Correo</label>
          <input type="email" [(ngModel)]="email" name="email" />
        </div>
        <div class="campo">
          <label>C√≥digo Postal</label>
          <input type="text" [(ngModel)]="codigoPostal" name="codigoPostal" />
        </div>
      </div>
    </div>

    <div class="seccion-card">
      <div class="seccion-titulo"><mat-icon>gavel</mat-icon> Servicio Condonado</div>

      <div class="radio-inline">
        <label class="radio-opcion">
          <input type="radio" name="tipoCondonado" value="no" [(ngModel)]="tipoCondonado" />
          No condonado
        </label>
        <label class="radio-opcion">
          <input type="radio" name="tipoCondonado" value="si" [(ngModel)]="tipoCondonado" />
          Condonado
        </label>
      </div>

      <div class="row-acta">
        <div class="campo">
          <label>No. Oficio</label>
          <input type="text" [(ngModel)]="numeroOficio" name="numeroOficio" />
        </div>
        <div class="campo">
          <label>Fecha</label>
          <input type="date" [(ngModel)]="fechaOficio" name="fechaOficio" />
        </div>
      </div>

      <p class="nota">Anotar en caso de servicio CERTIF. C/ANOT. MARG YA PAGADA</p>

      <div class="row-acta">
        <div class="campo">
          <label>Recibo n√∫mero</label>
          <input type="text" [(ngModel)]="reciboNumero" name="reciboNumero" />
        </div>
        <div class="campo">
          <label>Fecha de pago</label>
          <input type="date" [(ngModel)]="fechaPagoRecibo" name="fechaPagoRecibo" />
        </div>
      </div>
    </div>

    <div class="seccion-card">
      <div class="seccion-titulo"><mat-icon>notes</mat-icon> Observaciones</div>
      <textarea rows="3" [(ngModel)]="observaciones" name="observaciones" class="campo-input textarea"></textarea>
    </div>

    <div class="resultado-card" *ngIf="folioGenerado">
      <div class="resultado-row">
        <span class="resultado-label">Folio</span>
        <span class="resultado-valor">{{ folioGenerado }}</span>
        <button type="button" class="btn-copiar" (click)="copiarFolio()">üìã Copiar</button>
      </div>
      <div class="resultado-row" *ngIf="lineaCaptura">
        <span class="resultado-label">L√≠nea de captura</span>
        <span class="resultado-valor">{{ lineaCaptura }}</span>
        <button type="button" class="btn-copiar" (click)="copiarLineaCaptura()">üìã Copiar</button>
      </div>
    </div>

    <div class="acciones-footer">
      <button type="button" class="btn-generar" (click)="crearNuevaSolicitud()" [disabled]="procesando">
        <mat-icon>credit_card</mat-icon>
        {{ procesando ? 'Generando...' : 'Generar Hoja de Pago' }}
      </button>
    </div>

    <div class="acciones-footer" *ngIf="mostrarPdf">
      <button type="button" class="btn-imprimir" (click)="imprimir()">
        <mat-icon>print</mat-icon>
        Imprimir Hoja de Pago
      </button>
    </div>

  </form>
</div>